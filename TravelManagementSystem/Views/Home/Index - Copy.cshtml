<!-- Main Content -->
<div class="container-fluid p-3 mt-lg-3 content" id="mainContent">
    <div class="container container-fluid">
        <!-- Top Statistics Cards -->
        <div class="row">
            <!-- Card for Total Customers -->
            <div class="col-md-4">
                <div class="card text-white bg-primary mb-3">
                    <div class="card-body">
                        <h5 class="card-title text-center">Total Customers</h5>
                        <p class="card-text display-6 text-center" id="totalCustomers">
                            @ViewBag.CustomerCount <!-- Display customer count here -->
                        </p>
                    </div>
                </div>
            </div>

            <!-- Card for Active Agents -->
            <div class="col-md-4">
                <div class="card text-white bg-success mb-3">
                    <div class="card-body">
                        <h5 class="card-title text-center">Active Agents</h5>
                        <p class="card-text display-6 text-center">@ViewBag.AgentCount</p>
                    </div>
                </div>
            </div>

            <!-- Card for Total Sales -->
            <div class="col-md-4">
                <div class="card text-white bg-warning mb-3">
                    <div class="card-body">
                        <h5 class="card-title text-center">Total Sales</h5>
                        <p class="card-text display-6 text-center">@ViewBag.TotalSaleCount</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="row mt-4">
            <div class="col-5">
                <h3 class="mb-4">Sales Overview</h3>
                <canvas id="salesChart"></canvas> <!-- Canvas for Chart -->
            </div>
            <div class="col-2">
               
            </div>
            <div class="col-5">
                <h3 class="mb-4">Customer Overview</h3>
                <canvas id="salesChart"></canvas> <!-- Canvas for Chart -->
            </div>
           
        </div>

    </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Sidebar toggle
    document.addEventListener('DOMContentLoaded', function () {
        const sidebar = document.getElementById('sidebarMenu');
        const toggleButton = document.getElementById('sidebarToggle');
        const closeButton = document.getElementById('sidebarClose');
        const content = document.getElementById('mainContent');

        const toggleSidebar = () => {
            sidebar?.classList.toggle('show');
            content?.classList.toggle('shifted');
        };

        // Attach event listeners for sidebar toggle
        toggleButton?.addEventListener('click', toggleSidebar);
        closeButton?.addEventListener('click', toggleSidebar);

        // Load chart data from ViewBag
        const salesLabels = @Html.Raw(Json.Serialize(ViewBag.SalesLabels));
        const salesValues = @Html.Raw(Json.Serialize(ViewBag.SalesValues));

        console.log('Sales Labels:', salesLabels);
        console.log('Sales Values:', salesValues);

        // Initialize sales chart
        const initializeChart = () => {
            const ctx = document.getElementById('salesChart')?.getContext('2d');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: salesLabels, // Month names
                    datasets: [{
                        label: 'Monthly Sales',
                        data: salesValues, // Sales data
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        title: {
                            display: true,
                            text: 'Sales Data (Monthly)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        };

        // Call the chart initialization function
        initializeChart();
    });

</script>